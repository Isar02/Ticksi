<div class="events-page">
  <header class="events-header">
    <h1>Discover all <span>Events</span></h1>
    <p>
      Explore the latest and most popular events across... all categories. Your next adventure is just one click away!
    </p>
  </header>

  <div class="events-controls">
    <div class="search-area">
      <div class="search-wrapper">
        <input
          type="text"
          placeholder="Search events..."
          [(ngModel)]="searchTerm"
          (input)="onSearchInput(searchTerm)"
          (focus)="onSearchFocus()"
          (blur)="onSearchBlur()"
          autocomplete="off"
        />

        <button class="clear-btn" *ngIf="searchTerm" (click)="clearSearch()" type="button">
          ✕
        </button>

        <!-- dropdown -->
        <div class="suggestions" *ngIf="showSuggestions">
          <div class="suggestion-item loading" *ngIf="isSuggestLoading">
            Loading...
          </div>

          <ng-container *ngIf="!isSuggestLoading">

            <!-- Events -->
            <div class="suggestion-group" *ngIf="eventSuggestions.length">
              <div class="group-title">Events</div>
              <button
                type="button"
                class="suggestion-item"
                *ngFor="let s of eventSuggestions"
                (mousedown)="$event.preventDefault(); pickSuggestion(s)"
                (click)="pickSuggestion(s)"
              >
                <span class="label">{{ s.label }}</span>
                <span class="badge">event</span>
              </button>
            </div>

            <!-- Categories -->
            <div class="suggestion-group" *ngIf="categorySuggestions.length">
              <div class="group-title">Categories</div>
              <button
                type="button"
                class="suggestion-item"
                *ngFor="let s of categorySuggestions"
                (mousedown)="$event.preventDefault(); pickSuggestion(s)"
                (click)="pickSuggestion(s)"
              >
                <span class="label">{{ s.label }}</span>
                <span class="badge">category</span>
              </button>
            </div>

            <!-- Locations -->
            <div class="suggestion-group" *ngIf="locationSuggestions.length">
              <div class="group-title">Locations</div>
              <button
                type="button"
                class="suggestion-item"
                *ngFor="let s of locationSuggestions"
                (mousedown)="$event.preventDefault(); pickSuggestion(s)"
                (click)="pickSuggestion(s)"
              >
                <span class="label">{{ s.label }}</span>
                <span class="badge">location</span>
              </button>
            </div>

          </ng-container>
        </div>
      </div>
    </div>

    <div class="filters">
      <select class="filter-select" [(ngModel)]="selectedSort" (change)="onSortChange()">
        <option value="date-desc">Date (Newest First)</option>
        <option value="date-asc">Date (Oldest First)</option>
        <option value="price-asc">Price (Low to High)</option>
        <option value="price-desc">Price (High to Low)</option>
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
      </select>
    </div>
  </div>

  <main class="events-grid">
    <div class="event-card" *ngFor="let event of events">
      <div class="event-card-image">
        <img
          
        />

        <button
          class="favorite-btn"
          *ngIf="authService.isAuthenticated()"
          (click)="toggleFavorite(event.publicId)"
          [class.favorited]="isFavorite(event.publicId)"
          type="button"
        >
          <span class="heart-icon">{{ isFavorite(event.publicId) ? '♥' : '♡' }}</span>
        </button>
      </div>

      <div class="event-card-content">
        <h3 class="event-title">{{ event.name }}</h3>
        <p class="event-date">{{ event.date | date: 'mediumDate' }}</p>
        <p class="event-price">{{ event.price | currency }}</p>

        <a [routerLink]="['/event', event.publicId]" class="btn-secondary view-details-btn">
          View Details
        </a>
      </div>
    </div>
  </main>

  <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

  <div class="empty-state" *ngIf="events.length === 0 && !isLoading">
    <p>No events available at the moment.</p>
  </div>
</div>
