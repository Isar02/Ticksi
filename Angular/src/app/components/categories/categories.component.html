<div class="page-container">
  <div class="content-card">

    <!-- Toolbar -->
    <div class="toolbar">
      <div class="toolbar-left">
        <h2>Categories</h2>
      </div>

      <div class="toolbar-right">
        <!-- Fake search (isti look kao public) -->
        <div class="search-wrapper">
          <input type="text" placeholder="Search categories..." disabled />
        </div>

        <button mat-raised-button color="primary" (click)="openForm()">
          Add category
        </button>
      </div>
    </div>

    <!-- Empty state -->
    <div class="empty-state" *ngIf="categories.length === 0">
      <div class="empty-icon">üìÇ</div>
      <h3>No categories yet</h3>
      <p>Create your first category to start organizing your content.</p>
      <button mat-raised-button color="primary" (click)="openForm()">
        Add category
      </button>
    </div>

    <!-- GRID ADMIN VIEW (umjesto tabele) -->
    <div class="category-grid" *ngIf="categories.length > 0">
      <div class="category-card" *ngFor="let category of categories">
        <!-- Poster -->
        <div class="category-poster">
          <ng-container *ngIf="category.posterUrl; else noPoster">
            <img
              [src]="getPosterUrl(category)"
              [alt]="category.name + ' poster'"
            />
          </ng-container>

          <ng-template #noPoster>
            <div class="no-poster">
              <span class="no-poster-icon">üñºÔ∏è</span>
              <span class="no-poster-text">No image</span>
            </div>
          </ng-template>
        </div>

        <!-- Body + akcije -->
        <div class="category-body">
          <h3>{{ category.name }}</h3>
          <p class="description">
            {{ category.description || 'No description provided.' }}
          </p>

          <div class="actions">
            <button
              mat-stroked-button
              class="download-btn"
              (click)="downloadReport(category)"
              [disabled]="isDownloading(category.publicId)"
              title="Download PDF report of events in this category"
            >
              <span *ngIf="!isDownloading(category.publicId)">üìÑ Download PDF</span>
              <span *ngIf="isDownloading(category.publicId)">‚è≥ Downloading...</span>
            </button>

            <button
              mat-stroked-button
              color="primary"
              class="edit-btn"
              (click)="openForm(category)"
            >
              Edit
            </button>

            <button
              mat-stroked-button
              color="warn"
              class="delete-btn"
              (click)="deleteCategory(category.publicId)"
            >
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
